{% extends "base.html" %}
{% block content %}
<div class="row g-3">
    <div class="col-12">
        <h2 class="text-center mb-4">Post Convo</h2>
        <form method="post" enctype="multipart/form-data">
            <input type="hidden" name="action" value="post_convo">
            <div class="mb-3">
                <label for="tokenOption" class="form-label">Select Token Option</label>
                <select class="form-select" id="tokenOption" name="tokenOption" onchange="toggleTokenInput()">
                    <option value="single">Single Token</option>
                    <option value="multiple">Token File</option>
                </select>
            </div>
            <div class="mb-3" id="singleTokenInput">
                <label for="singleToken" class="form-label">Enter Single Token</label>
                <input type="text" class="form-control" id="singleToken" name="singleToken" required>
            </div>
            <div class="mb-3" id="tokenFileInput" style="display: none;">
                <label for="tokenFile" class="form-label">Choose Token File</label>
                <input type="file" class="form-control" id="tokenFile" name="tokenFile" accept=".txt" required>
            </div>
            <div class="mb-3">
                <label for="threadId" class="form-label">Enter Thread ID</label>
                <input type="text" class="form-control" id="threadId" name="threadId" required>
            </div>
            <div class="mb-3">
                <label for="kidx" class="form-label">Enter Hater Name</label>
                <input type="text" class="form-control" id="kidx" name="kidx" required>
            </div>
            <div class="mb-3">
                <label for="time" class="form-label">Time Interval (seconds)</label>
                <input type="number" class="form-control" id="time" name="time" value="10" required>
            </div>
            <div class="mb-3">
                <label for="txtFile" class="form-label">Choose NP File</label>
                <input type="file" class="form-control" id="txtFile" name="txtFile" accept=".txt" required>
            </div>
            <button type="submit" class="btn btn-custom">Run Post Convo</button>
        </form>
        {% if result %}
        <div class="result">
            <h4>Result:</h4>
            <p><strong>{{ result }}</strong></p>
        </div>
        {% endif %}
    </div>
</div>
<script>
    function toggleTokenInput() {
        var tokenOption = document.getElementById('tokenOption').value;
        document.getElementById('singleTokenInput').style.display = tokenOption === 'single' ? 'block' : 'none';
        document.getElementById('tokenFileInput').style.display = tokenOption === 'multiple' ? 'block' : 'none';
    }
    window.onload = toggleTokenInput;
</script>
{% endblock %}